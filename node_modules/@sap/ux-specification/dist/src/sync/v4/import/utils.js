"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const page_1 = require("../../../specification/common/page");
const decorators_1 = require("../../common/decoration/decorators");
const utils_1 = require("../../common/utils");
function getPageType(name) {
    const pageTypeName = name.split('sap.fe.templates.')[1];
    switch (pageTypeName) {
        case 'ListReport':
            return page_1.PageType.ListReport;
        case 'ObjectPage':
            return page_1.PageType.ObjectPage;
        case 'OverviewPage':
            return page_1.PageType.OverviewPage;
    }
}
exports.getPageType = getPageType;
/**
 * Method transfers manifest values into aplication(app or page config) object values using decorators.
 * @param {{ [key: string]: any }} object - Application or Page Config object.
 * @param {Manifest} manifest - Application manifest.
 * @param {object} jsonSchema - Schema entry.
 * @param {string} [pageName] - Page name.
 * @param [sectionId] - Section id.
 */
function transferSettingsOfObject(object, manifest, jsonSchema, pageName, sectionId) {
    if (!jsonSchema) {
        return;
    }
    let manifestSection = {};
    for (const key in jsonSchema['properties'] || jsonSchema) {
        const exportPropertyRule = decorators_1.getExportRuleMetadata(object, key);
        if (exportPropertyRule && exportPropertyRule.manifest) {
            const targetAnnotationEncoded = sectionId && sectionId.replace('/', '::');
            const path = exportPropertyRule.manifest.path([pageName], targetAnnotationEncoded);
            manifestSection = utils_1.getManifestSectionByPathV4(manifest, path, sectionId, targetAnnotationEncoded);
            object[key] = exportPropertyRule.manifest.import
                ? exportPropertyRule.manifest.import(manifestSection, sectionId)
                : exportPropertyRule.manifest.key
                    ? manifestSection[exportPropertyRule.manifest.key]
                    : manifestSection[key];
        }
    }
}
exports.transferSettingsOfObject = transferSettingsOfObject;
//# sourceMappingURL=utils.js.map