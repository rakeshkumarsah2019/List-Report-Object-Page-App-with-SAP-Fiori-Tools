"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const portfinder_1 = require("portfinder");
function parseArgs(args, paramMap, defaults) {
    const params = (defaults !== null && defaults !== void 0 ? defaults : {});
    for (let index = 0; index < args.length; index++) {
        let key = args[index];
        key = key.startsWith('--') ? key.slice(2) : paramMap[key];
        if (key) {
            const value = args.length > index + 1 ? args[index + 1] : undefined;
            if (value === undefined || value.startsWith('-')) {
                params[key] = true;
            }
            else {
                params[key] = value;
                index++;
            }
        }
    }
    return params;
}
exports.parseArgs = parseArgs;
/**
 * Returns the next available port starting from 8080 and stopping at 9010.
 * If no port is available then an error is thrown
 */
async function getAvailablePort(start = 8080, stop = 9010) {
    return portfinder_1.getPortPromise({
        port: start,
        stopPort: stop
    })
        .then((port) => {
        return port;
    })
        .catch((error) => {
        throw new Error(error);
    });
}
exports.getAvailablePort = getAvailablePort;
//# sourceMappingURL=utils.js.map