"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const serve_static_1 = __importDefault(require("serve-static"));
const logger_1 = require("@ui5/logger");
const i18next_1 = __importDefault(require("i18next"));
const i18n_1 = require("./../i18n");
module.exports = ({ options }) => {
    // Initialize i18next
    i18n_1.initI18n();
    const ui5LocalPath = options.configuration && options.configuration.path;
    const log = logger_1.getLogger('server:serve-local');
    if (!ui5LocalPath) {
        log.info(i18next_1.default.t('NO_PATH_LOCAL_UI5'));
    }
    const serveResources = serve_static_1.default(path_1.join(ui5LocalPath, 'resources'));
    const serveTestResources = serve_static_1.default(path_1.join(ui5LocalPath, 'test-resources'));
    return (req, res, next) => {
        if (req.baseUrl === '/resources') {
            serveResources(req, res, next);
        }
        else if (req.baseUrl === '/test-resources') {
            serveTestResources(req, res, next);
        }
        else {
            next();
        }
    };
};
//# sourceMappingURL=fiori-tools-servestatic.js.map