import { Cookies } from '../../../src/connection';

describe('Cookies', () => {
    it('ignore invalid=false', () => {
        const response = {
            headers: {
                'set-cookie': ['valid=true;Max-Age=1234', 'invalid=false;Max-Age=0']
            }
        };

        const cookies = new Cookies();
        cookies.setCookie(response);
        const cookieString = cookies.toString();

        expect(cookieString).toBe('valid=true');
    });

    it('Handles "=" in cookie value correctly', () => {
        const response = {
            headers: {
                'set-cookie': ['sap-usercontext=sap-client=200; path=/']
            }
        };

        const cookies = new Cookies().setCookie(response);
        expect(cookies.toString()).toBe('sap-usercontext=sap-client=200');
    });
});
